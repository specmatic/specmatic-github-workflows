name: Base setup for gradle and java
description: Checkout, Pull Jdk 17, Setup Gradle

inputs:
  java-version:
    description: "The Java version to use"
    required: false
    default: "17"

  java-distribution:
    description: "The Java distribution to use"
    required: false
    default: "temurin"

runs:
  using: "composite"
  steps:
    - name: Set up QEMU
      if: runner.os != 'macos-latest'
      uses: docker/setup-qemu-action@v3

    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v3

    - name: Setup git
      run: |
        git config --global user.email "github-service-account@specmatic.io"
        git config --global user.name "Specmatic GitHub Service Account"
      shell: bash

    - name: Set up JDK 17
      uses: actions/setup-java@v4
      with:
        java-version: "${{ inputs.java-version }}"
        distribution: "${{ inputs.java-distribution }}"

    - name: Download semver cli
      if: runner.os != 'Windows'
      shell: bash
      run: |
        wget -O /usr/local/bin/semver https://raw.githubusercontent.com/fsaintjacques/semver-tool/master/src/semver
        chmod +x /usr/local/bin/semver

    - uses: actions/checkout@v4

    - name: Setup Gradle
      uses: gradle/actions/setup-gradle@v4
